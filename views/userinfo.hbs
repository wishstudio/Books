<h3>用户信息</h3>
<form action="/user/edit" onsubmit="return verifyForm();" method="post">
    <input type="hidden" name="id" id="id" value="{{id}}">
    <table>
        <tr><td>工号</td><td><input type="text" size="30" maxlength="30" name="uid" id="uid" value="{{uid}}"></td></tr>
        <tr><td>用户名</td><td><input type="text" size="30" maxlength="30" name="name" id="name" value="{{name}}"></td></tr>
        <tr><td>密码</td><td><input type="password" size="30" maxlength="30" name="password" id="password"></td></tr>
        <tr><td>确认密码</td><td><input type="password" size="30" maxlength="30" id="vpassword"></td></tr>
        <tr><td>邮箱</td><td><input type="text" size="30" maxlength="30" name="email" id="email" value="{{email}}""></td></tr>
        <tr><td>姓名</td><td><input type="text" size="30" maxlength="30" name="realname" id="realname" value="{{realname}}"></td></tr>
        <tr><td>性别</td><td>
        <select name="gender" id="gender" value="1">
            <option value="">未知</option>
            <option value="0">男</option>
            <option value="1">女</option>
        </select>
        <script>document.getElementById('gender').value = {{gender}}</script>
        <tr><td>年龄</td><td><input type="text" size="30" maxlength="30" name="age" id="age" value="{{age}}"></td></tr>
        <tr><td><button>{{#if id}}编辑{{else}}增加{{/if}}</button></td></tr>
    </table>
</form>
<script>
function verifyForm() {
    var id = document.getElementById('id').value;
    var name = document.getElementById('name').value;
    var password = document.getElementById('password').value;
    var vpassword = document.getElementById('vpassword').value;
    var email = document.getElementById('email').value;
    var age = document.getElementById('age').value;
    if (!name) {
        alert('用户名不能为空');
    }
    else if (password && (password != vpassword)) {
        alert('密码不匹配');
    }
    else if (!id && !password) {
        alert('密码不能为空');
    }
    else if (!email.match(/^.+@.+$/)) {
        alert('邮箱非法');
    }
    else if (age && !age.match(/^\d+$/)) {
        alert('年龄非法');
    }
    else
        return true;
    return false;
}
</script>
